import{g as G,u as J,h as D,i as X,j as ee,t as le,k as se,l as P,m as z,n as e,p as te,q as ue,s as ie,R,v as re,x as ae,y as ne,z as oe,A as ce,B as L,C as q,D as he,E as pe,F as me,G as ye,L as ge,H as de,I as ve,J as Ie,K as E,M as Ye,N as W}from"./app-tx1KU5ru.js";const Te=["/","/discord_present.html","/portfolio.html","/purchase_terms.html","/general/","/general/language.html","/plugins/","/zh-TW/","/zh-TW/discord_present.html","/zh-TW/portfolio.html","/zh-TW/purchase_terms.html","/general/kether/","/general/kether/begin.html","/general/kether/list.html","/general/ui/","/general/ui/features.html","/general/ui/overview.html","/plugins/partner/","/plugins/yuseries/","/zh-TW/general/","/zh-TW/general/language.html","/zh-TW/plugins/","/plugins/partner/Adyeshach/QandA.html","/plugins/partner/Adyeshach/","/plugins/partner/CDKLite/","/plugins/partner/Chemdah/","/plugins/partner/NBTProhibition/","/plugins/partner/Zaphkiel/","/plugins/yuseries/BetterHudChemdah/","/plugins/yuseries/Sortilege/","/plugins/yuseries/YuBattleMusic/","/plugins/yuseries/YuIllustration/","/plugins/yuseries/YuItemAction/","/plugins/yuseries/YuSpawnerHologram/","/plugins/yuseries/YuVarieLevel/","/zh-TW/general/kether/","/zh-TW/general/kether/begin.html","/zh-TW/general/kether/list.html","/zh-TW/general/ui/","/zh-TW/general/ui/features.html","/zh-TW/general/ui/overview.html","/zh-TW/plugins/partner/","/zh-TW/plugins/yuseries/","/plugins/yuseries/YuIllustration/basic/Placeholders.html","/plugins/yuseries/YuIllustration/basic/","/plugins/yuseries/YuIllustration/basic/kether.html","/plugins/yuseries/YuIllustration/basic/know-category.html","/plugins/yuseries/YuIllustration/basic/know-entry.html","/plugins/yuseries/YuIllustration/basic/reward.html","/plugins/yuseries/YuIllustration/compat/","/plugins/yuseries/YuIllustration/compat/chemdah.html","/plugins/yuseries/YuIllustration/start/Installation.html","/plugins/yuseries/YuIllustration/start/","/plugins/yuseries/YuIllustration/start/command.html","/plugins/yuseries/YuIllustration/ui/","/plugins/yuseries/YuIllustration/ui/overview.html","/plugins/yuseries/YuIllustration/unlocker/AdvancementDone.html","/plugins/yuseries/YuIllustration/unlocker/BreakBlock.html","/plugins/yuseries/YuIllustration/unlocker/CMIPlayTime.html","/plugins/yuseries/YuIllustration/unlocker/CraftItem.html","/plugins/yuseries/YuIllustration/unlocker/KillEntity.html","/plugins/yuseries/YuIllustration/unlocker/KillMythicmob.html","/plugins/yuseries/YuIllustration/unlocker/PermissionNode.html","/plugins/yuseries/YuIllustration/unlocker/PickupItem.html","/plugins/yuseries/YuIllustration/unlocker/PickupMMOItem.html","/plugins/yuseries/YuIllustration/unlocker/PickupMythicItem.html","/plugins/yuseries/YuIllustration/unlocker/PickupZapItem.html","/plugins/yuseries/YuIllustration/unlocker/PlaceBlock.html","/plugins/yuseries/YuIllustration/unlocker/PlayerMove.html","/plugins/yuseries/YuIllustration/unlocker/","/plugins/yuseries/YuIllustration/unlocker/TotalMoney.html","/plugins/yuseries/YuIllustration/unlocker/UseItem.html","/zh-TW/plugins/partner/Adyeshach/QandA.html","/zh-TW/plugins/partner/Adyeshach/","/zh-TW/plugins/partner/CDKLite/","/zh-TW/plugins/partner/Chemdah/","/zh-TW/plugins/partner/NBTProhibition/","/zh-TW/plugins/partner/Zaphkiel/","/zh-TW/plugins/yuseries/BetterHudChemdah/","/zh-TW/plugins/yuseries/Sortilege/","/zh-TW/plugins/yuseries/YuBattleMusic/","/zh-TW/plugins/yuseries/YuIllustration/","/zh-TW/plugins/yuseries/YuItemAction/","/zh-TW/plugins/yuseries/YuSpawnerHologram/","/zh-TW/plugins/yuseries/YuVarieLevel/","/plugins/yuseries/YuIllustration/compat/attribute/MMOCore.html","/plugins/yuseries/YuIllustration/compat/attribute/MythicLib.html","/plugins/yuseries/YuIllustration/compat/attribute/","/plugins/yuseries/YuIllustration/compat/attribute/Sortilege.html","/zh-TW/plugins/yuseries/YuIllustration/api/","/zh-TW/plugins/yuseries/YuIllustration/basic/Placeholders.html","/zh-TW/plugins/yuseries/YuIllustration/basic/","/zh-TW/plugins/yuseries/YuIllustration/basic/kether.html","/zh-TW/plugins/yuseries/YuIllustration/basic/know-category.html","/zh-TW/plugins/yuseries/YuIllustration/basic/know-entry.html","/zh-TW/plugins/yuseries/YuIllustration/basic/reward.html","/zh-TW/plugins/yuseries/YuIllustration/compat/","/zh-TW/plugins/yuseries/YuIllustration/compat/chemdah.html","/zh-TW/plugins/yuseries/YuIllustration/start/Installation.html","/zh-TW/plugins/yuseries/YuIllustration/start/","/zh-TW/plugins/yuseries/YuIllustration/start/command.html","/zh-TW/plugins/yuseries/YuIllustration/ui/","/zh-TW/plugins/yuseries/YuIllustration/ui/overview.html","/zh-TW/plugins/yuseries/YuIllustration/unlocker/AdvancementDone.html","/zh-TW/plugins/yuseries/YuIllustration/unlocker/BreakBlock.html","/zh-TW/plugins/yuseries/YuIllustration/unlocker/CMIPlayTime.html","/zh-TW/plugins/yuseries/YuIllustration/unlocker/CraftItem.html","/zh-TW/plugins/yuseries/YuIllustration/unlocker/KillEntity.html","/zh-TW/plugins/yuseries/YuIllustration/unlocker/KillMythicmob.html","/zh-TW/plugins/yuseries/YuIllustration/unlocker/PermissionNode.html","/zh-TW/plugins/yuseries/YuIllustration/unlocker/PickupItem.html","/zh-TW/plugins/yuseries/YuIllustration/unlocker/PickupMMOItem.html","/zh-TW/plugins/yuseries/YuIllustration/unlocker/PickupMythicItem.html","/zh-TW/plugins/yuseries/YuIllustration/unlocker/PickupZapItem.html","/zh-TW/plugins/yuseries/YuIllustration/unlocker/PlaceBlock.html","/zh-TW/plugins/yuseries/YuIllustration/unlocker/PlayerMove.html","/zh-TW/plugins/yuseries/YuIllustration/unlocker/","/zh-TW/plugins/yuseries/YuIllustration/unlocker/TotalMoney.html","/zh-TW/plugins/yuseries/YuIllustration/unlocker/UseItem.html","/zh-TW/plugins/yuseries/YuIllustration/update/","/zh-TW/plugins/yuseries/YuIllustration/update/migrate_note.html","/zh-TW/plugins/yuseries/YuIllustration/compat/attribute/MMOCore.html","/zh-TW/plugins/yuseries/YuIllustration/compat/attribute/MythicLib.html","/zh-TW/plugins/yuseries/YuIllustration/compat/attribute/","/zh-TW/plugins/yuseries/YuIllustration/compat/attribute/Sortilege.html","/404.html"],ke="SLIMSEARCH_QUERY_HISTORY",v=E(ke,[]),ze=()=>{const{queryHistoryCount:u}=W;return{enabled:u>0,queryHistories:v,addQueryHistory:n=>{v.value=Array.from(new Set([n,...v.value.slice(0,u-1)]))},removeQueryHistory:n=>{v.value=[...v.value.slice(0,n),...v.value.slice(n+1)]}}},S=u=>Te[u.id]+("anchor"in u?`#${u.anchor}`:""),We="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:B}=W,I=E(We,[]),be=()=>({enabled:B>0,resultHistories:I,addResultHistory:a=>{{const n={link:S(a),display:a.display};"header"in a&&(n.header=a.header),I.value=[n,...I.value.slice(0,B-1)]}},removeResultHistory:a=>{I.value=[...I.value.slice(0,a),...I.value.slice(a+1)]}}),fe=u=>{const a=he(),n=D(),b=pe(),i=P(0),Y=z(()=>i.value>0),h=me([]);return ye(()=>{const{search:f,terminate:y}=ge(),T=ve(g=>{const{resultsFilter:w=t=>t,querySplitter:d,suggestionsFilter:Q,...r}=a.value;g?(i.value+=1,f(g,n.value,r).then(t=>w(t,g,n.value,b.value)).then(t=>{i.value-=1,h.value=t}).catch(t=>{console.warn(t),i.value-=1,i.value||(h.value=[])})):h.value=[]},W.searchDelay-W.suggestDelay,{maxWait:5e3});de([u,n],([g])=>T(g.join(" "))),Ie(()=>{y()})}),{isSearching:Y,results:h}};var He=G({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(u,{emit:a}){const n=J(),b=D(),i=X(ee),{addQueryHistory:Y,queryHistories:h,removeQueryHistory:f}=ze(),{resultHistories:y,addResultHistory:T,removeResultHistory:g}=be(),w=le(u,"queries"),{results:d,isSearching:Q}=fe(w),r=se({isQuery:!0,index:0}),t=P(0),p=P(0),x=z(()=>h.value.length>0||y.value.length>0),H=z(()=>d.value.length>0),M=z(()=>d.value[t.value]||null),_=()=>{const{isQuery:l,index:s}=r;s===0?(r.isQuery=!l,r.index=l?y.value.length-1:h.value.length-1):r.index=s-1},$=()=>{const{isQuery:l,index:s}=r;s===(l?h.value.length-1:y.value.length-1)?(r.isQuery=!l,r.index=0):r.index=s+1},F=()=>{t.value=t.value>0?t.value-1:d.value.length-1,p.value=M.value.contents.length-1},K=()=>{t.value=t.value<d.value.length-1?t.value+1:0,p.value=0},O=()=>{p.value<M.value.contents.length-1?p.value+=1:K()},U=()=>{p.value>0?p.value-=1:F()},C=l=>l.map(s=>Ye(s)?s:e(s[0],s[1])),N=l=>{if(l.type==="customField"){const s=oe[l.index]||"$content",[m,o=""]=ce(s)?s[b.value].split("$content"):s.split("$content");return l.display.map(c=>e("div",C([m,...c,o])))}return l.display.map(s=>e("div",C(s)))},k=()=>{t.value=0,p.value=0,a("updateQuery",""),a("close")},j=()=>e("div",{class:"slimsearch-records"},e("div",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},i.value.queryHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},h.value.map((l,s)=>{const m=r.isQuery&&r.index===s;return e("li",{class:["slimsearch-record-matches",{active:m}],role:"option","aria-selected":m,onClick:()=>{a("updateQuery",l)}},e("div",[e(L,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},l),e("button",{type:"button",class:"slimsearch-remove-icon",title:i.value.remove,"aria-label":i.value.remove,innerHTML:q,onClick:o=>{o.preventDefault(),o.stopPropagation(),f(s)}})]))}))])),V=()=>e("ul",{class:"slimsearch-records"},e("li",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},i.value.resultHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},y.value.map((l,s)=>{const m=!r.isQuery&&r.index===s;return e("li",{class:["slimsearch-record-matches",{active:m}],role:"option","aria-selected":m},e(R,{to:l.link,onClick:()=>{k()}},()=>[e(L,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[l.header?e("div",{class:"slimsearch-record-content-header"},l.header):null,e("div",l.display.map(o=>C(o)).flat())]),e("button",{type:"button",class:"slimsearch-remove-icon",title:i.value.remove,"aria-label":i.value.remove,innerHTML:q,onClick:o=>{o.preventDefault(),o.stopPropagation(),g(s)}})]))}))]));return te("keydown",l=>{if(u.isFocusing){if(H.value){if(l.key==="ArrowUp")U();else if(l.key==="ArrowDown")O();else if(l.key==="Enter"){const s=M.value.contents[p.value];Y(u.queries.join(" ")),T(s),n.push(S(s)),k()}}else if(l.key==="ArrowUp")_();else if(l.key==="ArrowDown")$();else if(l.key==="Enter"){const{index:s}=r;r.isQuery?(l.preventDefault(),a("updateQuery",h.value[s])):(n.push(y.value[s].link),k())}}}),ue([t,p],()=>{var l;(l=document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active"))==null||l.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:u.queries.length?!H.value:!x.value}]},u.queries.length?Q.value?e(ie,{hint:i.value.searching}):H.value?e("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},d.value.map(({title:l,contents:s},m)=>{const o=t.value===m;return e("div",{class:["slimsearch-record",{active:o}],role:"group","aria-selected":o},[e("div",{class:"slimsearch-record-title"},l||i.value.defaultTitle),e("ul",{class:"slimsearch-record-contents"},s.map((c,Z)=>{const A=o&&p.value===Z;return e("li",{class:["slimsearch-record-matches",{active:A}],role:"option","aria-selected":A},e(R,{to:S(c),onClick:()=>{Y(u.queries.join(" ")),T(c),k()}},()=>[c.type==="text"?null:e(c.type==="title"?re:c.type==="heading"?ae:ne,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[c.type==="text"&&c.header?e("div",{class:"slimsearch-record-content-header"},c.header):null,e("div",N(c))])]))}))])})):i.value.emptyResult:x.value?[j(),V()]:i.value.emptyHistory)}});export{He as default};
