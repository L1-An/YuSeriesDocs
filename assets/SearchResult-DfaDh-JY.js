import{l as G,u as J,m as D,n as X,y as ee,t as se,p as le,q as P,v as W,x as l,z as ue,w as te,A as ie,R as L,B as re,D as ae,E as ne,F as oe,G as he,H as q,J as x,K as ce,L as pe,M as me,N as ye,O as ge,Q as ve,S as de,T as Ie,U as E,V as Ye,W as z}from"./app-MPm71dPQ.js";const ke=["/","/discord_present.html","/portfolio.html","/purchase_terms.html","/general/","/general/language.html","/plugins/","/zh-TW/","/zh-TW/discord_present.html","/zh-TW/portfolio.html","/zh-TW/purchase_terms.html","/general/kether/","/general/kether/begin.html","/general/kether/list.html","/general/ui/","/general/ui/features.html","/general/ui/overview.html","/plugins/partner/","/plugins/yuseries/","/zh-TW/general/","/zh-TW/general/language.html","/zh-TW/plugins/","/plugins/partner/Adyeshach/QandA.html","/plugins/partner/Adyeshach/","/plugins/partner/CDKLite/","/plugins/partner/Chemdah/","/plugins/partner/NBTProhibition/","/plugins/partner/Zaphkiel/","/plugins/yuseries/BetterHudChemdah/","/plugins/yuseries/Sortilege/","/plugins/yuseries/YuBattleMusic/","/plugins/yuseries/YuIllustration/","/plugins/yuseries/YuItemAction/","/plugins/yuseries/YuSpawnerHologram/","/plugins/yuseries/YuVarieLevel/","/zh-TW/general/kether/","/zh-TW/general/kether/begin.html","/zh-TW/general/kether/list.html","/zh-TW/general/ui/","/zh-TW/general/ui/features.html","/zh-TW/general/ui/overview.html","/zh-TW/plugins/partner/","/zh-TW/plugins/yuseries/","/plugins/yuseries/YuIllustration/basic/Placeholders.html","/plugins/yuseries/YuIllustration/basic/","/plugins/yuseries/YuIllustration/basic/kether.html","/plugins/yuseries/YuIllustration/basic/know-category.html","/plugins/yuseries/YuIllustration/basic/know-entry.html","/plugins/yuseries/YuIllustration/basic/reward.html","/plugins/yuseries/YuIllustration/compat/","/plugins/yuseries/YuIllustration/compat/chemdah.html","/plugins/yuseries/YuIllustration/start/Installation.html","/plugins/yuseries/YuIllustration/start/","/plugins/yuseries/YuIllustration/start/command.html","/plugins/yuseries/YuIllustration/ui/","/plugins/yuseries/YuIllustration/ui/overview.html","/plugins/yuseries/YuIllustration/unlocker/AdvancementDone.html","/plugins/yuseries/YuIllustration/unlocker/BreakBlock.html","/plugins/yuseries/YuIllustration/unlocker/CMIPlayTime.html","/plugins/yuseries/YuIllustration/unlocker/CraftItem.html","/plugins/yuseries/YuIllustration/unlocker/KillEntity.html","/plugins/yuseries/YuIllustration/unlocker/KillMythicmob.html","/plugins/yuseries/YuIllustration/unlocker/PermissionNode.html","/plugins/yuseries/YuIllustration/unlocker/PickupItem.html","/plugins/yuseries/YuIllustration/unlocker/PickupMMOItem.html","/plugins/yuseries/YuIllustration/unlocker/PickupMythicItem.html","/plugins/yuseries/YuIllustration/unlocker/PickupZapItem.html","/plugins/yuseries/YuIllustration/unlocker/PlaceBlock.html","/plugins/yuseries/YuIllustration/unlocker/PlayerMove.html","/plugins/yuseries/YuIllustration/unlocker/","/plugins/yuseries/YuIllustration/unlocker/TotalMoney.html","/zh-TW/plugins/partner/Adyeshach/QandA.html","/zh-TW/plugins/partner/Adyeshach/","/zh-TW/plugins/partner/CDKLite/","/zh-TW/plugins/partner/Chemdah/","/zh-TW/plugins/partner/NBTProhibition/","/zh-TW/plugins/partner/Zaphkiel/","/zh-TW/plugins/yuseries/BetterHudChemdah/","/zh-TW/plugins/yuseries/Sortilege/","/zh-TW/plugins/yuseries/YuBattleMusic/","/zh-TW/plugins/yuseries/YuIllustration/","/zh-TW/plugins/yuseries/YuItemAction/","/zh-TW/plugins/yuseries/YuSpawnerHologram/","/zh-TW/plugins/yuseries/YuVarieLevel/","/plugins/yuseries/YuIllustration/compat/attribute/MMOCore.html","/plugins/yuseries/YuIllustration/compat/attribute/MythicLib.html","/plugins/yuseries/YuIllustration/compat/attribute/","/plugins/yuseries/YuIllustration/compat/attribute/Sortilege.html","/zh-TW/plugins/yuseries/YuIllustration/basic/Placeholders.html","/zh-TW/plugins/yuseries/YuIllustration/basic/","/zh-TW/plugins/yuseries/YuIllustration/basic/kether.html","/zh-TW/plugins/yuseries/YuIllustration/basic/know-category.html","/zh-TW/plugins/yuseries/YuIllustration/basic/know-entry.html","/zh-TW/plugins/yuseries/YuIllustration/basic/reward.html","/zh-TW/plugins/yuseries/YuIllustration/compat/","/zh-TW/plugins/yuseries/YuIllustration/compat/chemdah.html","/zh-TW/plugins/yuseries/YuIllustration/start/Installation.html","/zh-TW/plugins/yuseries/YuIllustration/start/","/zh-TW/plugins/yuseries/YuIllustration/start/command.html","/zh-TW/plugins/yuseries/YuIllustration/ui/","/zh-TW/plugins/yuseries/YuIllustration/ui/overview.html","/zh-TW/plugins/yuseries/YuIllustration/unlocker/AdvancementDone.html","/zh-TW/plugins/yuseries/YuIllustration/unlocker/BreakBlock.html","/zh-TW/plugins/yuseries/YuIllustration/unlocker/CMIPlayTime.html","/zh-TW/plugins/yuseries/YuIllustration/unlocker/CraftItem.html","/zh-TW/plugins/yuseries/YuIllustration/unlocker/KillEntity.html","/zh-TW/plugins/yuseries/YuIllustration/unlocker/KillMythicmob.html","/zh-TW/plugins/yuseries/YuIllustration/unlocker/PermissionNode.html","/zh-TW/plugins/yuseries/YuIllustration/unlocker/PickupItem.html","/zh-TW/plugins/yuseries/YuIllustration/unlocker/PickupMMOItem.html","/zh-TW/plugins/yuseries/YuIllustration/unlocker/PickupMythicItem.html","/zh-TW/plugins/yuseries/YuIllustration/unlocker/PickupZapItem.html","/zh-TW/plugins/yuseries/YuIllustration/unlocker/PlaceBlock.html","/zh-TW/plugins/yuseries/YuIllustration/unlocker/PlayerMove.html","/zh-TW/plugins/yuseries/YuIllustration/unlocker/","/zh-TW/plugins/yuseries/YuIllustration/unlocker/TotalMoney.html","/zh-TW/plugins/yuseries/YuIllustration/compat/attribute/MMOCore.html","/zh-TW/plugins/yuseries/YuIllustration/compat/attribute/MythicLib.html","/zh-TW/plugins/yuseries/YuIllustration/compat/attribute/","/zh-TW/plugins/yuseries/YuIllustration/compat/attribute/Sortilege.html","/404.html"],Te="SLIMSEARCH_QUERY_HISTORY",v=E(Te,[]),We=()=>{const{queryHistoryCount:t}=z;return{enabled:t>0,queryHistories:v,addQueryHistory:a=>{v.value=Array.from(new Set([a,...v.value.slice(0,t-1)]))},removeQueryHistory:a=>{v.value=[...v.value.slice(0,a),...v.value.slice(a+1)]}}},S=t=>ke[t.id]+("anchor"in t?`#${t.anchor}`:""),ze="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:B}=z,d=E(ze,[]),be=()=>({enabled:B>0,resultHistories:d,addResultHistory:r=>{{const a={link:S(r),display:r.display};"header"in r&&(a.header=r.header),d.value=[a,...d.value.slice(0,B-1)]}},removeResultHistory:r=>{d.value=[...d.value.slice(0,r),...d.value.slice(r+1)]}}),fe=t=>{const r=ce(),a=D(),b=pe(),n=P(0),I=W(()=>n.value>0),c=me([]);return ye(()=>{const{search:f,terminate:m}=ge(),Y=de(y=>{const{resultsFilter:w=u=>u,querySplitter:g,suggestionsFilter:Q,...i}=r.value;y?(n.value+=1,f(y,a.value,i).then(u=>w(u,y,a.value,b.value)).then(u=>{n.value-=1,c.value=u}).catch(u=>{console.warn(u),n.value-=1,n.value||(c.value=[])})):c.value=[]},z.searchDelay-z.suggestDelay,{maxWait:5e3});ve([t,a],([y])=>Y(y.join(" "))),Ie(()=>{m()})}),{isSearching:I,results:c}};var He=G({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(t,{emit:r}){const a=J(),b=D(),n=X(ee),{addQueryHistory:I,queryHistories:c,removeQueryHistory:f}=We(),{resultHistories:m,addResultHistory:Y,removeResultHistory:y}=be(),w=se(t,"queries"),{results:g,isSearching:Q}=fe(w),i=le({isQuery:!0,index:0}),u=P(0),p=P(0),R=W(()=>c.value.length>0||m.value.length>0),H=W(()=>g.value.length>0),M=W(()=>g.value[u.value]||null),O=()=>{const{isQuery:e,index:s}=i;s===0?(i.isQuery=!e,i.index=e?m.value.length-1:c.value.length-1):i.index=s-1},_=()=>{const{isQuery:e,index:s}=i;s===(e?c.value.length-1:m.value.length-1)?(i.isQuery=!e,i.index=0):i.index=s+1},$=()=>{u.value=u.value>0?u.value-1:g.value.length-1,p.value=M.value.contents.length-1},F=()=>{u.value=u.value<g.value.length-1?u.value+1:0,p.value=0},K=()=>{p.value<M.value.contents.length-1?p.value+=1:F()},N=()=>{p.value>0?p.value-=1:$()},C=e=>e.map(s=>Ye(s)?s:l(s[0],s[1])),U=e=>{if(e.type==="customField"){const s=oe[e.index]||"$content",[o,T=""]=he(s)?s[b.value].split("$content"):s.split("$content");return e.display.map(h=>l("div",C([o,...h,T])))}return e.display.map(s=>l("div",C(s)))},k=()=>{u.value=0,p.value=0,r("updateQuery",""),r("close")},j=()=>l("ul",{class:"slimsearch-result-list"},l("li",{class:"slimsearch-result-list-item"},[l("div",{class:"slimsearch-result-title"},n.value.queryHistory),c.value.map((e,s)=>l("div",{class:["slimsearch-result-item",{active:i.isQuery&&i.index===s}],onClick:()=>{r("updateQuery",e)}},[l(q,{class:"slimsearch-result-type"}),l("div",{class:"slimsearch-result-content"},e),l("button",{class:"slimsearch-remove-icon",innerHTML:x,onClick:o=>{o.preventDefault(),o.stopPropagation(),f(s)}})]))])),V=()=>l("ul",{class:"slimsearch-result-list"},l("li",{class:"slimsearch-result-list-item"},[l("div",{class:"slimsearch-result-title"},n.value.resultHistory),m.value.map((e,s)=>l(L,{to:e.link,class:["slimsearch-result-item",{active:!i.isQuery&&i.index===s}],onClick:()=>{k()}},()=>[l(q,{class:"slimsearch-result-type"}),l("div",{class:"slimsearch-result-content"},[e.header?l("div",{class:"content-header"},e.header):null,l("div",e.display.map(o=>C(o)).flat())]),l("button",{class:"slimsearch-remove-icon",innerHTML:x,onClick:o=>{o.preventDefault(),o.stopPropagation(),y(s)}})]))]));return ue("keydown",e=>{if(t.isFocusing){if(H.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")K();else if(e.key==="Enter"){const s=M.value.contents[p.value];I(t.queries.join(" ")),Y(s),a.push(S(s)),k()}}else if(e.key==="ArrowUp")O();else if(e.key==="ArrowDown")_();else if(e.key==="Enter"){const{index:s}=i;i.isQuery?(r("updateQuery",c.value[s]),e.preventDefault()):(a.push(m.value[s].link),k())}}}),te([u,p],()=>{var e;(e=document.querySelector(".slimsearch-result-list-item.active .slimsearch-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>l("div",{class:["slimsearch-result-wrapper",{empty:t.queries.length?!H.value:!R.value}],id:"slimsearch-results"},t.queries.length?Q.value?l(ie,{hint:n.value.searching}):H.value?l("ul",{class:"slimsearch-result-list"},g.value.map(({title:e,contents:s},o)=>{const T=u.value===o;return l("li",{class:["slimsearch-result-list-item",{active:T}]},[l("div",{class:"slimsearch-result-title"},e||n.value.defaultTitle),s.map((h,Z)=>{const A=T&&p.value===Z;return l(L,{to:S(h),class:["slimsearch-result-item",{active:A,"aria-selected":A}],onClick:()=>{I(t.queries.join(" ")),Y(h),k()}},()=>[h.type==="text"?null:l(h.type==="title"?re:h.type==="heading"?ae:ne,{class:"slimsearch-result-type"}),l("div",{class:"slimsearch-result-content"},[h.type==="text"&&h.header?l("div",{class:"content-header"},h.header):null,l("div",U(h))])])})])})):n.value.emptyResult:R.value?[j(),V()]:n.value.emptyHistory)}});export{He as default};
